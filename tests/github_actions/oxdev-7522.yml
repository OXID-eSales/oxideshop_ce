# This config depends on the defaults.yml testplan
# Only diverging settings are defined here
prepare_shop:
  composer:
    transform: |
      {
          "require": {
              "oxid-esales/twig-component": "dev-b-8.0.x-drop-smarty-template-OXDEV-7522",
              "oxid-esales/twig-admin-theme": "dev-b-8.0.x-drop-smarty-template-OXDEV-7522",
              "oxid-esales/apex-theme": "dev-b-8.0.x-drop-smarty-template-OXDEV-7522"
          }
      }

install_shop:
  output:
    files: |
      docker-compose.yml
      source/composer.json*
      source/composer.lock
      source/source/config.inc.php
      files.txt
      data/php/logs/error_log.txt

codeception:
  # Running on public runners, this should pose no problem
  max_parallel: &codeception_max_parallel 4

runtest:
  composer:
    transform: |
      {
          "require-dev": {
              "oxid-esales/tests-deprecated-ce": "dev-b-8.0.x-drop-smarty-template-OXDEV-7522",
              "codeception/module-webdriver": "^3.1",
              "phpunit/phpunit": "^10.4"
          }
      }

phpcs_tests:
  # Check all files in the full check
  diff_only: false
  filter: '^\./source/Internal/.*\.php$'

sonarcloud:
  matrix:
    testplan: '["-","tests/github_actions/sonarcloud_oxideshop_ce_internal.yml"]'
  target_branch: b-8.0.x-drop-smarty-template-OXDEV-7522

finish:
  slack_title: 'OXDEV 7522 CE ({{ .Data.global.git.shop_ref }}) on {{ .Github.Repository }} by {{ .Github.Actor }}'
